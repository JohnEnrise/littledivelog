<ng-template #listTemplate>
    <table class="table table-hover">
        <thead>
            <tr>
                <td>Date</td>
                <td class="d-none d-xl-table-cell">Divetime</td>
                <td>Tags</td>
                <td class="d-none d-md-table-cell">Divespot</td>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let d of dives" (click)="selectDive(d)" [ngClass]="{ 'table-active': dive !== undefined && d.id === dive.id }">
                <td>{{ d.date | date: "y-MM-dd HH:mm:ss"}}</td>
                <td class="d-none d-xl-table-cell">{{ d.divetime }}</td>
                <td>
                    <app-tags [tags]="d.tags"></app-tags>
                </td>
                <td class="d-none d-md-table-cell">{{ d.placeStr }}</td>
            </tr>
        </tbody>
    </table>
</ng-template>

<ng-template #detailTemplate>
    <app-dive-detail #diveDetail [dive]="dive" (onDiveChanged)="diveChanged($event)"></app-dive-detail>
</ng-template>

<ng-template #menuTemplate>
    <!-- <div class="input-group">
        <span class="input-group-btn">
            <button class="btn btn-primary" type="button" (click)="gotoNewDive()">
                <i class="fa fa-plus"></i>
            </button>
        </span>
        <input class="form-control" #search type="text" placeholder="Search..." (keyup.enter)="refresh()" />
        <span class="input-group-btn">
            <button class="btn btn-primary" (click)="refresh()">
                <i class="fa fa-search"></i>
            </button>
        </span>
    </div> -->
    <app-dive-search
        (filterChanged)="filters = $event; this.refresh()"
        (onNewDive)="gotoNewDive()"
    ></app-dive-search>
</ng-template>

<app-list-detail
    [listTemplate]="listTemplate"
    [detailTemplate]="detailTemplate"
    [menuTemplate]="menuTemplate"
    [selected]="dive"
></app-list-detail>

<app-modal id="sure" confirmText="Discard changed" cancelText="Keep changes">
    <p>
        Some changes cannot be saved because they are invalid.
    </p>
    <p>
        Are you sure you want to leave this page and cancel all changes?
    </p>
</app-modal>
