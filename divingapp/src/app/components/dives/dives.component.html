<ng-template #listTemplate>
    <table class="table table-hover">
        <thead>
            <tr>
                <td *ngIf="selectionMode"></td>
                <td>Date</td>
                <td class="d-none d-xl-table-cell">Divetime</td>
                <td>Tags</td>
                <td class="d-none d-md-table-cell">Divespot</td>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let d of dives" (click)="clickDive(d)" [ngClass]="{ 'table-active': dive !== undefined && d.id === dive.id }">
                <td *ngIf="selectionMode"><input type="checkbox" ng-disabled="d.id !== undefined" [(ngModel)]="d.selected" /></td>
                <td>{{ d.date | date: "y-MM-dd HH:mm:ss"}}</td>
                <td class="d-none d-xl-table-cell">{{ d.divetime }}</td>
                <td>
                    <app-tags [tags]="d.tags"></app-tags>
                </td>
                <td class="d-none d-md-table-cell">{{ d.placeStr }}</td>
            </tr>
        </tbody>
    </table>
</ng-template>

<ng-template #detailTemplate>
    <app-dive-detail #diveDetail [dive]="dive" (onDiveChanged)="diveChanged($event)"></app-dive-detail>
</ng-template>


<ng-template #menuButtonsTemplate>
    <button type="button" class="btn" [ngClass]="{ 'btn-outline-secondary': this.mode !== 'merge', 'btn-success': this.mode === 'merge'  }" (click)="toggleMerge()">
        <i class="fa fa-link"></i>
    </button>
    <button type="button" class="btn btn-outline-primary" (click)="gotoNewDive()()">
        <i class="fa fa-plus"></i>
    </button>
</ng-template>

<ng-template #menuTemplate>
    <app-dive-search
        (filterChanged)="filters = $event; this.refresh()"
        [extraButtons]="menuButtonsTemplate"
    ></app-dive-search>
</ng-template>


<app-list-detail
    [listTemplate]="listTemplate"
    [detailTemplate]="detailTemplate"
    [menuTemplate]="menuTemplate"
    [selected]="dive"
></app-list-detail>


<app-modal id="sure" confirmText="Discard changed" cancelText="Keep changes">
    <p>
        Some changes cannot be saved because they are invalid.
    </p>
    <p>
        Are you sure you want to leave this page and cancel all changes?
    </p>
</app-modal>
