<ng-template #debug>
    <pre *ngIf="form"><code>{{diagnostic | json}}</code></pre>
</ng-template>

<form (ngSubmit)="onSubmit.emit($event)" (keydown.enter)="onEnter($event)">
        <div class="detail-menu">
            <button class="btn btn-primary" type="submit" [disabled]="!isNew && !form.dirty" title="Save">
                <i class="fa fa-floppy-o"></i>
            </button>
            <button class="btn btn-primary" (click)="reset()" [disabled]="!form.dirty || isNew" title="Undo unsaved changes">
                <i class="fa fa-undo"></i>
            </button>
            <button class="btn btn-primary" (click)="onBack.emit()" [appHideWhenDesktop]="true" title="Go back">
                <i class="fa fa-arrow-left"></i>
            </button>
        </div>

        <div class="form-content">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item" *ngFor="let key of pageKeys">
                    <a
                        class="nav-link"
                        [ngClass]="{ 'active': key === defaultPage }"
                        [attr.href]="'#' + key"
                        [attr.aria-controls]="key"
                        role="tab"
                        data-toggle="tab"
                    >
                        {{key}}
                    </a>
                </li>
                <li *ngIf="showDebug">
                    <a class="nav-link" href="#debug" aria-controls="debug" role="tab" data-toggle="tab">Debug</a>
                </li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content" #content>
                <div
                    *ngFor="let key of pageKeys"
                    role="tabpanel"
                    class="tab-pane"
                    [attr.id]="key"
                    [ngClass]="{ 'active': key === defaultPage }"
                >
                    <template *ngTemplateOutlet="pages[key]"></template>
                </div>
                <div *ngIf="showDebug" role="tabpanel" class="tab-pane" id="debug">
                    <div class="card">
                        <div class="card-body">
                            <pre><code>{{ diagnostic | json }}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>