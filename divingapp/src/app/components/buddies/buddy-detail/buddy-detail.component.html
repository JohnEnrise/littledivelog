
<form
  [formGroup]="form"
  *ngIf="buddy !== undefined"
  (ngSubmit)="onSubmit($event)"
  (keydown.enter)="onEnter($event)"
>
  <div class="detail-menu">
    <button class="btn btn-lg btn-primary" type="submit" [disabled]="!form.valid || !form.dirty" title="Save buddy"><i class="fa fa-floppy-o"></i></button>
    <button class="btn btn-lg btn-primary" type="button" (click)="reset()" [disabled]="!form.dirty" title="Undo unsaved changes"><i class="fa fa-undo"></i></button>
    <button class="btn btn-lg btn-primary" type="button" (click)="back()"  [appHideWhenDesktop]="true" title="Go back"><i class="fa fa-arrow-left"></i></button>
  </div>

  <div [ngClass]="{ 'form-group':true, 'has-error': !form.controls.text.valid }">
    <label>Name</label>
    <input class="form-control" formControlName="text" placeholder="Myke" aria-describedby="name" required />
  </div>
  <div [ngClass]="{ 'form-group':true, 'has-error': !form.controls.color.valid }">
    <label>Color</label>
    <div class="input-group">
      <span class="input-group-addon input-group-addon-color">
          <i [style.background-color]="form.controls.color.value"></i>
      </span>
      <input
        class="form-control"
        [(colorPicker)]="form.controls.color.value"
        [cpPosition]="'bottom'"
        (colorPickerChange)="controlChanged('color')"
        formControlName="color"
        placeholder="#cccccc"
        aria-describedby="color"
        required
      />
    </div>
  </div>
  <div [ngClass]="{ 'form-group':true, 'has-error': !form.controls.email.valid }">
      <label>Email</label>
      <input class="form-control" formControlName="email" placeholder="myke@doamin.tld" aria-describedby="email" />
    </div>
  <div class="form-group">
    <label>Dive count</label>
    <input class="form-control-plaintext" [value]="buddy.dive_count" aria-describedby="DiveCount" readonly />
  </div>
  <div class="form-group">
    <label>Last dive</label>
    <input class="form-control-plaintext" [value]="buddy.last_dive | date:'y-MM-dd HH:mm:ss'"  aria-describedby="LastDive" readonly />
  </div>
  <pre><code>{{diagnostic | json}}</code></pre>
</form>